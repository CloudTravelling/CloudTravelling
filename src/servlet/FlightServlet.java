package servlet;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

/**
 * Created by 亚中 on 2016-05-23.
 */
@WebServlet("/getFlightData")
public class FlightServlet extends HttpServlet {
    private final static String key = "373fc46faf0fb80449d687aa6ace8612";
    private final static String url = "http://apis.juhe.cn/plan/bc?start=PEK&end=PVG&dtype=json" + "&key="+key;

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
//        String result = Service.getData(url);
        String result = "{\"resultcode\":\"200\",\"reason\":\"查询成功\",\"result\":[{\"FlightNum\":\"HU7609\",\"AirlineCode\":\"HU\",\"Airline\":\"海南航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"94.87%\",\"DepTerminal\":\"T1\",\"ArrTerminal\":\"T2\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"06:30\",\"ArrTime\":\"08:50\",\"Dexpected\":\"06:49\",\"Aexpected\":\"08:31\"},{\"FlightNum\":\"ZH4905\",\"AirlineCode\":\"ZH\",\"Airline\":\"深圳航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"91.29%\",\"DepTerminal\":\"T3\",\"ArrTerminal\":\"T2\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"07:20\",\"ArrTime\":\"09:35\",\"Dexpected\":\"07:34\",\"Aexpected\":\"09:22\"},{\"FlightNum\":\"CA155\",\"AirlineCode\":\"CA\",\"Airline\":\"中国航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"91.29%\",\"DepTerminal\":\"T3\",\"ArrTerminal\":\"T2\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"07:20\",\"ArrTime\":\"09:35\",\"Dexpected\":\"07:34\",\"Aexpected\":\"09:22\"},{\"FlightNum\":\"CZ9669\",\"AirlineCode\":\"CZ\",\"Airline\":\"南方航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"94.87%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"07:40\",\"ArrTime\":\"09:50\",\"Dexpected\":\"07:44\",\"Aexpected\":\"09:30\"},{\"FlightNum\":\"QF4000\",\"AirlineCode\":\"QF\",\"Airline\":\"澳洲航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"94.87%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"07:40\",\"ArrTime\":\"09:50\",\"Dexpected\":\"07:44\",\"Aexpected\":\"09:30\"},{\"FlightNum\":\"MU5183\",\"AirlineCode\":\"MU\",\"Airline\":\"东方航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"94.87%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"07:40\",\"ArrTime\":\"09:50\",\"Dexpected\":\"07:44\",\"Aexpected\":\"09:30\"},{\"FlightNum\":\"MU271\",\"AirlineCode\":\"MU\",\"Airline\":\"东方航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"85.63%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"14:05\",\"ArrTime\":\"16:10\",\"Dexpected\":\"14:35\",\"Aexpected\":\"16:18\"},{\"FlightNum\":\"QF4006\",\"AirlineCode\":\"QF\",\"Airline\":\"澳洲航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"85.63%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"14:05\",\"ArrTime\":\"16:10\",\"Dexpected\":\"14:35\",\"Aexpected\":\"16:18\"},{\"FlightNum\":\"MU563\",\"AirlineCode\":\"MU\",\"Airline\":\"东方航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"87.56%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"16:20\",\"ArrTime\":\"18:40\",\"Dexpected\":\"17:09\",\"Aexpected\":\"18:51\"},{\"FlightNum\":\"QF4004\",\"AirlineCode\":\"QF\",\"Airline\":\"澳洲航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"87.56%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"16:20\",\"ArrTime\":\"18:40\",\"Dexpected\":\"17:09\",\"Aexpected\":\"18:51\"},{\"FlightNum\":\"CZ9263\",\"AirlineCode\":\"CZ\",\"Airline\":\"南方航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"85.09%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"19:25\",\"ArrTime\":\"21:40\",\"Dexpected\":\"20:03\",\"Aexpected\":\"\"},{\"FlightNum\":\"QF4002\",\"AirlineCode\":\"QF\",\"Airline\":\"澳洲航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"85.09%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"19:25\",\"ArrTime\":\"21:40\",\"Dexpected\":\"20:03\",\"Aexpected\":\"\"},{\"FlightNum\":\"MU5130\",\"AirlineCode\":\"MU\",\"Airline\":\"东方航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"85.09%\",\"DepTerminal\":\"T2\",\"ArrTerminal\":\"T1\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"19:25\",\"ArrTime\":\"21:40\",\"Dexpected\":\"20:03\",\"Aexpected\":\"\"},{\"FlightNum\":\"SC1883\",\"AirlineCode\":\"SC\",\"Airline\":\"山东航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"87.56%\",\"DepTerminal\":\"T3\",\"ArrTerminal\":\"T2\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"20:20\",\"ArrTime\":\"22:35\",\"Dexpected\":\"\",\"Aexpected\":\"\"},{\"FlightNum\":\"CA1883\",\"AirlineCode\":\"CA\",\"Airline\":\"中国航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"87.56%\",\"DepTerminal\":\"T3\",\"ArrTerminal\":\"T2\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"20:20\",\"ArrTime\":\"22:35\",\"Dexpected\":\"\",\"Aexpected\":\"\"},{\"FlightNum\":\"ZH1883\",\"AirlineCode\":\"ZH\",\"Airline\":\"深圳航空\",\"DepCity\":\"北京首都\",\"ArrCity\":\"上海浦东\",\"DepCode\":\"PEK\",\"ArrCode\":\"PVG\",\"OnTimeRate\":\"87.56%\",\"DepTerminal\":\"T3\",\"ArrTerminal\":\"T2\",\"FlightDate\":\"2016-05-29\",\"PEKDate\":\"2016-05-29\",\"DepTime\":\"20:20\",\"ArrTime\":\"22:35\",\"Dexpected\":\"\",\"Aexpected\":\"\"}],\"error_code\":0}";
        response.setCharacterEncoding("utf-8");
        PrintWriter printWriter = response.getWriter();
        printWriter.print(result);
        printWriter.flush();
        printWriter.close();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request, response);
    }
}
